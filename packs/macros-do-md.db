{"name":"Apaga Vela - Ten Candles","type":"script","author":"dJvi2seC8CqTkxhs","img":"icons/sundries/lights/candle-pillar-lit-yellow.webp","scope":"global","command":"const candleOn = 'modules/md-random-stuff/stuff/tencandles/vela-1-acesa_VP8.webm';\nconst candleBlowingOut = 'modules/md-random-stuff/stuff/tencandles/vela-2-apagando_VP8.webm';\nconst candleOff = 'modules/md-random-stuff/stuff/tencandles/vela-3-apagada_VP8.webm';\nconst timeToBlowOut = 5000; // 5 secs - animation time - don't mess with it unless you know what you are doing.\nconst probability = 1;\n\n/*\nicon: icons/sundries/lights/candle-pillar-lit-yellow.webp\n\n//game.Gametime.doEvery({seconds:10}, \"TestMacro\"); // start to run\n//game.Gametime.flushQueue(); // stop to run\n\nconst currentSceneID = game.scenes.current.id;\ndangerZone.triggerZone('Vento', currentSceneID)\n*/\n\n/*\n== Important - Tags\nstatus_a = on\nstatus_b = Blowing Out\nstatus_c = off\n*/\n\nmain();\nconst version = 'v0.1';\n\nasync function main() {  \n  let candles = await Tagger.getByTag('status_a'); // Select all burning candles \n  let selectedCandle = candles[getRandom(0,candles.length-1)];\n  let candles_on = candles.length;\n  \n  if ( (candles.length>0) && shouldTheCandleDie(probability) ) { //avoid error    \n    changeCandleStatus( Tagger.getTags(selectedCandle)[0], false ); // turn off the candle\n\n\n    let message1 = `Haviam dez.`;\n    let message2 = `Agora tem ${candles_on-1}...`;\n    let chatData = {\n      speaker: null,\n      content: `<div style=\"position:relative; background: #ddd9d5;padding: 0.5rem; margin-left:-7px;margin-right:-7px;margin-bottom:-7px;margin-top:-27px\"><label class=\"titulo\" style=\"font-size:35px; color: #b02b2e;\">Velas</label><div style=\"position: absolute;top: 0;right: 0;width: 50px;height:50px;background: linear-gradient(45deg, #00000000 50%, #000000 50%);\"></div><br><label style=\"font-size: 15px\">${message1}</label><div style=\"margin-top:5px ;height: 5px;width: 100%;background: linear-gradient(20deg,  #000000 70%, #ddd9d500 70%);\"></div><p>${message2}</p></div>`};\n    ChatMessage.create(chatData, {});          \n  }\n}\n\n// FUNCTIONS\nasync function changeCandleStatus(candleTag, candleStatus) {\n  let candle = await Tagger.getByTag(candleTag);  \n  \n  await Tagger.removeTags(candle[0], 'status_a');\n  await Tagger.removeTags(candle[0], 'status_c');\n  await Tagger.addTags(candle[0], 'status_c'); \n  \n  new Sequence()\n    .wait(1500)\n    .thenDo(async() => { \n      await candle[0].document.update({img: candleBlowingOut});\n    })\n    .wait(timeToBlowOut)\n    .thenDo(async() => { \n      await candle[0].document.update({img: candleOff});\n    })      \n    .play()  \n}\n\nfunction getRandom(min, max) { // return between min and max\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction shouldTheCandleDie(probability) {  \n  if ( probability>=Math.random() ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nasync function restoreAllCandles() {\n  let candles = await Tagger.getByTag('status_c');  \n  for (let candle of candles) {\n    await candle.document.update({img: candleOn});\n    await Tagger.removeTags(candle, 'status_c');\n    await Tagger.removeTags(candle, 'status_a');\n    await Tagger.addTags(candle, 'status_a');       \n  }\n}\n//restoreAllCandles();","folder":null,"sort":0,"permission":{"default":0,"dJvi2seC8CqTkxhs":3},"flags":{"core":{"sourceId":"Macro.oWgyfTyH3LgIuXPU"}},"_id":"1PAljy99TdgrN37S"}
{"name":"Auto Danger - Ten Candles","type":"script","author":"dJvi2seC8CqTkxhs","img":"icons/weapons/thrown/bomb-fuse-red-black.webp","scope":"global","command":"const dangerZoneName = 'Vento'; // dangerzone danger\n\n/*\nicon: icons/weapons/thrown/bomb-fuse-red-black.webp\n*/\n\nconst currentSceneID = game.scenes.current.id;\ndangerZone.triggerZone(dangerZoneName, currentSceneID);","folder":null,"sort":0,"permission":{"default":0,"dJvi2seC8CqTkxhs":3},"flags":{"core":{"sourceId":"Macro.oddZGEi8Nr7cTmwD"}},"_id":"1m9snbGBpHJSCU0Y"}
{"name":"Restaura Velas - Ten Candles","type":"script","author":"dJvi2seC8CqTkxhs","img":"icons/sundries/lights/torch-brown-lit.webp","scope":"global","command":"const candleOn = 'modules/md-random-stuff/stuff/tencandles/vela-1-acesa_VP8.webm';\nconst candleBlowingOut = 'modules/md-random-stuff/stuff/tencandles/vela-2-apagando_VP8.webm';\nconst candleOff = 'modules/md-random-stuff/stuff/tencandles/vela-3-apagada_VP8.webm';\n\n/*\nicon: icons/sundries/lights/torch-brown-lit.webp\n*/\nconst version = 'v0.1';\n\nasync function restoreAllCandles() {\n  let candles = await Tagger.getByTag('status_c');  \n  for (let candle of candles) {\n    await candle.document.update({img: candleOn});\n    await Tagger.removeTags(candle, 'status_c');\n    await Tagger.removeTags(candle, 'status_a');\n    await Tagger.addTags(candle, 'status_a');       \n  }\n}\n\nrestoreAllCandles();","folder":null,"sort":0,"permission":{"default":0,"dJvi2seC8CqTkxhs":3},"flags":{"core":{"sourceId":"Macro.Bjy2OhtVAN0ABk8W"}},"_id":"6SxaI6fNypDLaqRx"}
{"name":"Executa Ciclo - Ten Candles","type":"script","author":"dJvi2seC8CqTkxhs","img":"icons/magic/time/clock-stopwatch-white-blue.webp","scope":"global","command":"// Press F5 to stop\nconst timeToTryToBlowOut = 10000; // 10 secs\n\n/*\nicon: icons/magic/time/clock-stopwatch-white-blue.webp\n*/\nconst version = 'v0.1';\nsetInterval(() => game.macros.getName(\"Auto Danger - Ten Candles\").execute(), timeToTryToBlowOut);","folder":null,"sort":0,"permission":{"default":0,"dJvi2seC8CqTkxhs":3},"flags":{"core":{"sourceId":"Macro.BYFJV9RRmnEYWdrp"}},"_id":"UYgUhyvV54lWkdHX"}
{"name":"Apaga Vela - Ten Candles","type":"script","author":"dJvi2seC8CqTkxhs","img":"icons/sundries/lights/candle-pillar-lit-yellow.webp","scope":"global","command":"const candleOn = 'modules/md-random-stuff/stuff/tencandles/vela-1-acesa_VP8.webm';\nconst candleBlowingOut = 'modules/md-random-stuff/stuff/tencandles/vela-2-apagando_VP8.webm';\nconst candleOff = 'modules/md-random-stuff/stuff/tencandles/vela-3-apagada_VP8.png';\nconst timeToBlowOut = 5000; // 5 secs - animation time - don't mess with it unless you know what you are doing.\nconst probability = 1;\n\n/*\nicon: icons/sundries/lights/candle-pillar-lit-yellow.webp\n\n//game.Gametime.doEvery({seconds:10}, \"TestMacro\"); // start to run\n//game.Gametime.flushQueue(); // stop to run\n\nconst currentSceneID = game.scenes.current.id;\ndangerZone.triggerZone('Vento', currentSceneID)\n*/\n\n/*\n== Important - Tags\nstatus_a = on\nstatus_b = Blowing Out\nstatus_c = off\n*/\n\nmain();\nconst version = 'v0.2';\n\nasync function main() {  \n  let candles = await Tagger.getByTag('status_a'); // Select all burning candles \n  let selectedCandle = candles[getRandom(0,candles.length-1)];\n  let candles_on = candles.length;\n  \n  if ( (candles.length>0) && shouldTheCandleDie(probability) ) { //avoid error    \n    changeCandleStatus( Tagger.getTags(selectedCandle)[0], false ); // turn off the candle\n\n\n    let message1 = `Haviam dez.`;\n    let message2 = `Agora tem ${candles_on-1}...`;\n    let chatData = {\n      speaker: null,\n      content: `<div style=\"position:relative; background: #ddd9d5;padding: 0.5rem; margin-left:-7px;margin-right:-7px;margin-bottom:-7px;margin-top:-27px\"><label class=\"titulo\" style=\"font-size:35px; color: #b02b2e;\">Velas</label><div style=\"position: absolute;top: 0;right: 0;width: 50px;height:50px;background: linear-gradient(45deg, #00000000 50%, #000000 50%);\"></div><br><label style=\"font-size: 15px\">${message1}</label><div style=\"margin-top:5px ;height: 5px;width: 100%;background: linear-gradient(20deg,  #000000 70%, #ddd9d500 70%);\"></div><p>${message2}</p></div>`};\n    ChatMessage.create(chatData, {});          \n  }\n}\n\n// FUNCTIONS\nasync function changeCandleStatus(candleTag, candleStatus) {\n  let candle = await Tagger.getByTag(candleTag);  \n  \n  await Tagger.removeTags(candle[0], 'status_a');\n  await Tagger.removeTags(candle[0], 'status_c');\n  await Tagger.addTags(candle[0], 'status_c'); \n  \n  new Sequence()\n    .wait(1500)\n    .thenDo(async() => { \n      await candle[0].document.update({img: candleBlowingOut});\n    })\n    .wait(timeToBlowOut)\n    .thenDo(async() => { \n      await candle[0].document.update({img: candleOff});\n    })      \n    .play()  \n}\n\nfunction getRandom(min, max) { // return between min and max\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction shouldTheCandleDie(probability) {  \n  if ( probability>=Math.random() ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nasync function restoreAllCandles() {\n  let candles = await Tagger.getByTag('status_c');  \n  for (let candle of candles) {\n    await candle.document.update({img: candleOn});\n    await Tagger.removeTags(candle, 'status_c');\n    await Tagger.removeTags(candle, 'status_a');\n    await Tagger.addTags(candle, 'status_a');       \n  }\n}\n//restoreAllCandles();","folder":null,"sort":0,"permission":{"default":0,"dJvi2seC8CqTkxhs":3},"flags":{"core":{"sourceId":"Macro.oWgyfTyH3LgIuXPU"}},"_id":"P7KLy4RyUXviQJ3A"}
{"$$deleted":true,"_id":"1PAljy99TdgrN37S"}
{"$$deleted":true,"_id":"1m9snbGBpHJSCU0Y"}
{"$$deleted":true,"_id":"UYgUhyvV54lWkdHX"}
{"$$deleted":true,"_id":"6SxaI6fNypDLaqRx"}
{"$$deleted":true,"_id":"P7KLy4RyUXviQJ3A"}
{"name":"Apaga Vela - Ten Candles","type":"script","author":"dJvi2seC8CqTkxhs","img":"icons/sundries/lights/candle-pillar-lit-yellow.webp","scope":"global","command":"const candleOn = 'modules/md-random-stuff/stuff/tencandles/vela-1-acesa_VP8.webm';\nconst candleBlowingOut = 'modules/md-random-stuff/stuff/tencandles/vela-2-apagando_VP8.webm';\nconst candleOff = 'modules/md-random-stuff/stuff/tencandles/vela-3-apagada_VP8.png';\nconst timeToBlowOut = 5000; // 5 secs - animation time - don't mess with it unless you know what you are doing.\nconst probability = 1;\n\n/*\nicon: icons/sundries/lights/candle-pillar-lit-yellow.webp\n\n//game.Gametime.doEvery({seconds:10}, \"TestMacro\"); // start to run\n//game.Gametime.flushQueue(); // stop to run\n\nconst currentSceneID = game.scenes.current.id;\ndangerZone.triggerZone('Vento', currentSceneID)\n*/\n\n/*\n== Important - Tags\nstatus_a = on\nstatus_b = Blowing Out\nstatus_c = off\n*/\n\nmain();\nconst version = 'v0.2';\n\nasync function main() {  \n  let candles = await Tagger.getByTag('status_a'); // Select all burning candles \n  let selectedCandle = candles[getRandom(0,candles.length-1)];\n  let candles_on = candles.length;\n  \n  if ( (candles.length>0) && shouldTheCandleDie(probability) ) { //avoid error    \n    changeCandleStatus( Tagger.getTags(selectedCandle)[0], false ); // turn off the candle\n\n\n    let message1 = `Haviam dez.`;\n    let message2 = `Agora tem ${candles_on-1}...`;\n    let chatData = {\n      speaker: null,\n      content: `<div style=\"position:relative; background: #ddd9d5;padding: 0.5rem; margin-left:-7px;margin-right:-7px;margin-bottom:-7px;margin-top:-27px\"><label class=\"titulo\" style=\"font-size:35px; color: #b02b2e;\">Velas</label><div style=\"position: absolute;top: 0;right: 0;width: 50px;height:50px;background: linear-gradient(45deg, #00000000 50%, #000000 50%);\"></div><br><label style=\"font-size: 15px\">${message1}</label><div style=\"margin-top:5px ;height: 5px;width: 100%;background: linear-gradient(20deg,  #000000 70%, #ddd9d500 70%);\"></div><p>${message2}</p></div>`};\n    ChatMessage.create(chatData, {});          \n  }\n}\n\n// FUNCTIONS\nasync function changeCandleStatus(candleTag, candleStatus) {\n  let candle = await Tagger.getByTag(candleTag);  \n  \n  await Tagger.removeTags(candle[0], 'status_a');\n  await Tagger.removeTags(candle[0], 'status_c');\n  await Tagger.addTags(candle[0], 'status_c'); \n  \n  new Sequence()\n    .wait(1500)\n    .thenDo(async() => { \n      await candle[0].document.update({img: candleBlowingOut});\n    })\n    .wait(timeToBlowOut)\n    .thenDo(async() => { \n      await candle[0].document.update({img: candleOff});\n    })      \n    .play()  \n}\n\nfunction getRandom(min, max) { // return between min and max\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction shouldTheCandleDie(probability) {  \n  if ( probability>=Math.random() ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nasync function restoreAllCandles() {\n  let candles = await Tagger.getByTag('status_c');  \n  for (let candle of candles) {\n    await candle.document.update({img: candleOn});\n    await Tagger.removeTags(candle, 'status_c');\n    await Tagger.removeTags(candle, 'status_a');\n    await Tagger.addTags(candle, 'status_a');       \n  }\n}\n//restoreAllCandles();","folder":null,"sort":0,"permission":{"default":0,"dJvi2seC8CqTkxhs":3},"flags":{"core":{"sourceId":"Macro.oWgyfTyH3LgIuXPU"}},"_id":"D05jU1JLDzZSsqfX"}
{"name":"Restaura Velas - Ten Candles","type":"script","author":"dJvi2seC8CqTkxhs","img":"icons/sundries/lights/torch-brown-lit.webp","scope":"global","command":"const candleOn = 'modules/md-random-stuff/stuff/tencandles/vela-1-acesa_VP8.webm';\nconst candleBlowingOut = 'modules/md-random-stuff/stuff/tencandles/vela-2-apagando_VP8.webm';\nconst candleOff = 'modules/md-random-stuff/stuff/tencandles/vela-3-apagada_VP8.png';\n\n/*\nicon: icons/sundries/lights/torch-brown-lit.webp\n*/\nconst version = 'v0.2';\n\nasync function restoreAllCandles() {\n  let candles = await Tagger.getByTag('status_c');  \n  for (let candle of candles) {\n    await candle.document.update({img: candleOn});\n    await Tagger.removeTags(candle, 'status_c');\n    await Tagger.removeTags(candle, 'status_a');\n    await Tagger.addTags(candle, 'status_a');       \n  }\n}\n\nrestoreAllCandles();","folder":null,"sort":0,"permission":{"default":0,"dJvi2seC8CqTkxhs":3},"flags":{"core":{"sourceId":"Macro.Bjy2OhtVAN0ABk8W"}},"_id":"OVwPmojC1ooOBJpC"}
{"name":"Auto Danger - Ten Candles","type":"script","author":"dJvi2seC8CqTkxhs","img":"icons/weapons/thrown/bomb-fuse-red-black.webp","scope":"global","command":"const dangerZoneName = 'Vento'; // dangerzone danger\n\n/*\nicon: icons/weapons/thrown/bomb-fuse-red-black.webp\n*/\n\nconst currentSceneID = game.scenes.current.id;\ndangerZone.triggerZone(dangerZoneName, currentSceneID);","folder":null,"sort":0,"permission":{"default":0,"dJvi2seC8CqTkxhs":3},"flags":{"core":{"sourceId":"Macro.oddZGEi8Nr7cTmwD"}},"_id":"NgeTgVcWqe4AglTf"}
{"name":"Executa Ciclo - Ten Candles","type":"script","author":"dJvi2seC8CqTkxhs","img":"icons/magic/time/clock-stopwatch-white-blue.webp","scope":"global","command":"// Press F5 to stop\nconst timeToTryToBlowOut = 10000; // 10 secs\n\n/*\nicon: icons/magic/time/clock-stopwatch-white-blue.webp\n*/\nconst version = 'v0.1';\nsetInterval(() => game.macros.getName(\"Auto Danger - Ten Candles\").execute(), timeToTryToBlowOut);","folder":null,"sort":0,"permission":{"default":0,"dJvi2seC8CqTkxhs":3},"flags":{"core":{"sourceId":"Macro.BYFJV9RRmnEYWdrp"}},"_id":"i0BTvF2WULrvY8OL"}
